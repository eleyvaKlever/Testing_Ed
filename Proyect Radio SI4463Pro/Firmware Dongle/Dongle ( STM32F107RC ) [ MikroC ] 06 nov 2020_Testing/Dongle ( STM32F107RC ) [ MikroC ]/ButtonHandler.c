/*******************************************************************************************************************************************************************************************************
 * File:        
 * Author:      
 * Editor:      
 * Project:     
 * Version:     
 * 
 * Compiler:    
 * IDE:         
 * Platform:    
 * Kernel:      
 * 
 * Notes:
*******************************************************************************************************************************************************************************************************/
/**********************************************************************************************
 * Prototyping Header
**********************************************************************************************/
#include "ButtonHandler.h"
/**********************************************************************************************
 * Global Variables
**********************************************************************************************/

/**********************************************************************************************
 * Local Variables
**********************************************************************************************/

/**********************************************************************************************
 * Instances
**********************************************************************************************/

/**********************************************************************************************
 * IRQ Handlers
**********************************************************************************************/
/*********************************************************************
 * 
*********************************************************************/
void vButtonISR() iv IVT_INT_EXTI9_5 ics ICS_AUTO{
    if( EXTI_PR.B8 ){
        EXTI_PR.B8 |= 1;

        // UART1_Write_Text( "[ IRQ ] Button\r\n" );
    }
}

/**********************************************************************************************
 * Function declaration
**********************************************************************************************/
/*********************************************************************
 * 
*********************************************************************/
void vButtonSetup(){
    GPIO_Digital_Input( &GPIOB_BASE, _GPIO_PINMASK_8 );

    /********************************************************
	 * Clock Enable
	********************************************************/
    RCC_APB2ENRbits.AFIOEN = 1;
    /********************************************************
	 * Pin Configuration
	********************************************************/
    AFIO_EXTICR3    |= 0x0001;
    /********************************************************
	 * Interruption Edge Flag
	********************************************************/
    EXTI_IMR.B8     |= 1;
    EXTI_FTSR.B8    |= 1;

    NVIC_IntEnable( IVT_INT_EXTI9_5 );

    // UART1_Write_Text( "[ SETUP ] Button Done\r\n" );
}

/*******************************************************************************************************************************************************************************************************
 * End of File
*******************************************************************************************************************************************************************************************************/