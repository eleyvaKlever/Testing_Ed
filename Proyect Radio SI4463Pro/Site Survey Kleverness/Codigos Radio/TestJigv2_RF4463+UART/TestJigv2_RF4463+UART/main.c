/*******************************************************************************************************************************************************************************************************
 * File:        main.c
 * Author:      
 * Editor:      
 * Project:     
 * Version:     
 * 
 * Compiler:    
 * IDE:         
 * Platform:    
 * Kernel:      
 * 
 * Notes:
*******************************************************************************************************************************************************************************************************/
/**********************************************************************************************
 * Main Header
**********************************************************************************************/
#include "main.h"
/**********************************************************************************************
 * Configuration File
**********************************************************************************************/
/**********************************************************************************************
 * Error Handlers Files
**********************************************************************************************/
/********************************************************
 * WatchDog
********************************************************/
/********************************************************
 * Error Handler
********************************************************/
/********************************************************
 * Debug File
********************************************************/
#include "Debug.c"
/**********************************************************************************************
 * Instances
**********************************************************************************************/
/**********************************************************************************************
 * Function Files
**********************************************************************************************/
/********************************************************
 * 
********************************************************/
#include "rf4463handler.c"
#include "rf4463pro.c"
#include "rf4463spi.c"
/********************************************************
 * 
********************************************************/
#include "UART1Handler.c"
/********************************************************
 * 
********************************************************/
#include "utils.c"

/**********************************************************************************************
 * 
**********************************************************************************************/
void main(){
    /**********************************************************************************************
     * Hardware Configuration Functions
    **********************************************************************************************/
    /**********************************************************************************************
     * Hardware Modules Initialization
    **********************************************************************************************/
        vUARTTxInit();
        vUARTRxInit();

        ucRF4463Setup( RF4463_DEFAULT_CHANNEL, RF4463_DEFAULT_CHANNEL, RF4463_DEFAULT_NETWORK, RF4463_DEFAULT_TX_POWER );
    /**********************************************************************************************
     * Initial Data Load
    **********************************************************************************************/
        vUART1ResetRxBuffer();
    /**********************************************************************************************
     * Main Loop
    **********************************************************************************************/
        STM_LOGV( "[ SYS ] Start Success\r\n", NULL );
        while( 1 ){
            if( ucRF4463GetIRQFlag() == 1 ){
                // STM_LOGV( "RF IRQ\r\n", NULL );
                vRF4463MesageHandler();
                vRF4463ResetIRQFlag();
            }
            if( ucUART1MessageReady() == 1 ){
                // STM_LOGV( "UART IRQ\r\n", NULL );
                vUART1MessageHandler();
                vUART1ResetIRQFlag();
            }
        }
}

/*******************************************************************************************************************************************************************************************************
 * End of File
*******************************************************************************************************************************************************************************************************/